{# Nested Components ------------------------------------------------------------------------------------------------------------------- #}

{% from "snippets/loopAttrs.njk" import loopAttrs %}
{% from "components/button.njk" import button %}

{# Macro ------------------------------------------------------------------------------------------------------------------------------- #}

{% macro marquee(props={}, attrs={}) %}

{# Values ------------------------------------------------------------------------------------------------------------------------------ #}

{# ------------------------------------------------------------------------------------------------------------------------------------- #}

<div data-marquee
    class="relative {{ attrs.class }}"
    {{ loopAttrs(attrs) }}
>
    {% if props.fadeEdges %}
        <div aria-hidden="true" class="absolute inset-y-0 z-(--z-elevated) w-[5%] start-0 bg-linear-to-r from-surface to-transparent"></div>
        <div aria-hidden="true" class="absolute inset-y-0 z-(--z-elevated) w-[5%] end-0 bg-linear-to-l from-surface to-transparent"></div>
    {% endif %}

    <div
        x-ref="marqueeTrack"
        style="
            --px-width: tan(atan2(1512px, 1px));
            --marquee-duration: calc(var(--px-width) / 1500 * {{ props.speed }});
            --animate-duration: var(--marquee-duration);
        "
        class="relative flex animate-marquee {% if props.pauseOnHover %}hover:[animation-play-state:paused]{% endif %}"
    >
        <div x-ref="marqueeList" class="{{ props.itemWrapperStyles }}">
            {{ caller() | safe }}
            {{ caller() | safe }}
        </div>
    </div>
</div>

{% endmacro %}

{# Component Documentation ------------------------------------------------------------------------------------------------------------- #}

{% set marqueeMeta = {
    args: '{% call marquee(
    props={
        speed: "25s",
        pauseOnHover: boolean,
        fadeEdges: boolean,
        itemWrapperStyles:""
    },
    attrs={}
) %}
{% endcall %}',
description: "
- Put elements you want repeated inside the `{{ caller() }}`
"
} %}
